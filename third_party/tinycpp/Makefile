#Makefile autogenerated by RcB2
prefix = /usr/local
bindir = $(prefix)/bin

PROG = cppmain
SRCS = cppmain.c \
	tokenizer.c \
	preproc.c

LIBULZ_BASE?=../cdev/cdev/lib/

LIBS = 

CFLAGS_N = 
CPPFLAGS_N = -I $(LIBULZ_BASE)/include
LDFLAGS_N = 

OBJS = $(SRCS:.c=.o)

MAKEFILE := $(firstword $(MAKEFILE_LIST))

-include config.mak

all: $(PROG)

clean:
	rm -f $(PROG)
	rm -f $(OBJS)

rebuild:
	$(MAKE) -f $(MAKEFILE) clean && $(MAKE) -f $(MAKEFILE) all

ddebug:
	$(MAKE) -f $(MAKEFILE) clean && $(MAKE) -f $(MAKEFILE) CFLAGS="-O0 -g3 -DDEBUG" all

debug:
	$(MAKE) -f $(MAKEFILE) clean && $(MAKE) -f $(MAKEFILE) CFLAGS="-O0 -g3" all

install: $(PROG)
	install -d $(DESTDIR)/$(bindir)
	install -D -m 755 $(PROG) $(DESTDIR)/$(bindir)/

src: $(SRCS)
	$(CC) $(CPPFLAGS_N) $(CPPFLAGS) $(CFLAGS_N) $(CFLAGS) -o $(PROG) $^ $(LDFLAGS_N) $(LDFLAGS) $(LIBS)

%.o: %.c
	$(CC) $(CPPFLAGS_N) $(CPPFLAGS) $(CFLAGS_N) $(CFLAGS) -c -o $@ $<

$(PROG): $(OBJS)
	$(CC) $(CFLAGS_N) $(CFLAGS) $(LDFLAGS_N) $(LDFLAGS) $(OBJS) $(LIBS) -o $@

.PHONY: all clean rebuild install src
